(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){b.defineOption("placeholder","",function(g,j,h){var i=h&&h!=b.Init;if(j&&!i){g.on("blur",e);g.on("change",a);g.on("swapDoc",a);a(g)}else{if(!j&&i){g.off("blur",e);g.off("change",a);g.off("swapDoc",a);c(g);var k=g.getWrapperElement();k.className=k.className.replace(" CodeMirror-empty","")}}if(j&&!g.hasFocus()){e(g)}});function c(g){if(g.state.placeholder){g.state.placeholder.parentNode.removeChild(g.state.placeholder);g.state.placeholder=null}}function d(g){c(g);var h=g.state.placeholder=document.createElement("pre");h.style.cssText="height: 0; overflow: visible";h.style.direction=g.getOption("direction");h.className="CodeMirror-placeholder";var i=g.getOption("placeholder");if(typeof i=="string"){i=document.createTextNode(i)}h.appendChild(i);g.display.lineSpace.insertBefore(h,g.display.lineSpace.firstChild)}function e(g){if(f(g)){d(g)}}function a(g){var i=g.getWrapperElement(),h=f(g);i.className=i.className.replace(" CodeMirror-empty","")+(h?" CodeMirror-empty":"");if(h){d(g)}else{c(g)}}function f(g){return(g.lineCount()===1)&&(g.getLine(0)==="")}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function d(n,m,o,i){if(o&&o.call){var g=o;o=null}else{var g=c(n,o,"rangeFinder")}if(typeof m=="number"){m=b.Pos(m,0)}var h=c(n,o,"minFoldSize");function f(p){var q=g(n,m);if(!q||q.to.line-q.from.line<h){return null}var s=n.findMarksAt(q.from);for(var r=0;r<s.length;++r){if(s[r].__isFold&&i!=="fold"){if(!p){return null}q.cleared=true;s[r].clear()}}return q}var k=f(true);if(c(n,o,"scanUp")){while(!k&&m.line>n.firstLine()){m=b.Pos(m.line-1,0);k=f(false)}}if(!k||k.cleared||i==="unfold"){return}var l=e(n,o);b.on(l,"mousedown",function(p){j.clear();b.e_preventDefault(p)});var j=n.markText(k.from,k.to,{replacedWith:l,clearOnEnter:c(n,o,"clearOnEnter"),__isFold:true});j.on("clear",function(q,p){b.signal(n,"unfold",n,q,p)});b.signal(n,"fold",n,k.from,k.to)}function e(f,g){var h=c(f,g,"widget");if(typeof h=="string"){var i=document.createTextNode(h);h=document.createElement("span");h.appendChild(i);h.className="CodeMirror-foldmarker"}else{if(h){h=h.cloneNode(true)}}return h}b.newFoldFunction=function(g,f){return function(h,i){d(h,i,{rangeFinder:g,widget:f})}};b.defineExtension("foldCode",function(h,f,g){d(this,h,f,g)});b.defineExtension("isFolded",function(h){var g=this.findMarksAt(h);for(var f=0;f<g.length;++f){if(g[f].__isFold){return true}}});b.commands.toggleFold=function(f){f.foldCode(f.getCursor())};b.commands.fold=function(f){f.foldCode(f.getCursor(),null,"fold")};b.commands.unfold=function(f){f.foldCode(f.getCursor(),null,"unfold")};b.commands.foldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"fold")}})};b.commands.unfoldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"unfold")}})};b.registerHelper("fold","combine",function(){var f=Array.prototype.slice.call(arguments,0);return function(g,k){for(var h=0;h<f.length;++h){var j=f[h](g,k);if(j){return j}}}});b.registerHelper("fold","auto",function(f,k){var h=f.getHelpers(k,"fold");for(var g=0;g<h.length;g++){var j=h[g](f,k);if(j){return j}}});var a={rangeFinder:b.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:false,clearOnEnter:true};b.defineOption("foldOptions",null);function c(f,h,g){if(h&&h[g]!==undefined){return h[g]}var i=f.options.foldOptions;if(i&&i[g]!==undefined){return i[g]}return a[g]}b.defineExtension("foldOption",function(g,f){return c(this,g,f)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("./foldcode"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","./foldcode"],a)}else{a(CodeMirror)}}})(function(d){d.defineOption("foldGutter",false,function(m,o,n){if(n&&n!=d.Init){m.clearGutter(m.state.foldGutter.options.gutter);m.state.foldGutter=null;m.off("gutterClick",k);m.off("change",g);m.off("viewportChange",l);m.off("fold",e);m.off("unfold",e);m.off("swapDoc",g)}if(o){m.state.foldGutter=new j(i(o));b(m);m.on("gutterClick",k);m.on("change",g);m.on("viewportChange",l);m.on("fold",e);m.on("unfold",e);m.on("swapDoc",g)}});var h=d.Pos;function j(m){this.options=m;this.from=this.to=0}function i(m){if(m===true){m={}}if(m.gutter==null){m.gutter="CodeMirror-foldgutter"}if(m.indicatorOpen==null){m.indicatorOpen="CodeMirror-foldgutter-open"}if(m.indicatorFolded==null){m.indicatorFolded="CodeMirror-foldgutter-folded"}return m}function c(m,n){var p=m.findMarks(h(n,0),h(n+1,0));for(var o=0;o<p.length;++o){if(p[o].__isFold&&p[o].find().from.line==n){return p[o]}}}function f(m){if(typeof m=="string"){var n=document.createElement("div");n.className=m+" CodeMirror-guttermarker-subtle";return n}else{return m.cloneNode(true)}}function a(m,s,r){var o=m.state.foldGutter.options,q=s;var p=m.foldOption(o,"minFoldSize");var n=m.foldOption(o,"rangeFinder");m.eachLine(s,r,function(t){var w=null;if(c(m,q)){w=f(o.indicatorFolded)}else{var v=h(q,0);var u=n&&n(m,v);if(u&&u.to.line-u.from.line>=p){w=f(o.indicatorOpen)}}m.setGutterMarker(t,o.gutter,w);++q})}function b(m){var n=m.getViewport(),o=m.state.foldGutter;if(!o){return}m.operation(function(){a(m,n.from,n.to)});o.from=n.from;o.to=n.to}function k(m,n,q){var p=m.state.foldGutter;if(!p){return}var o=p.options;if(q!=o.gutter){return}var r=c(m,n);if(r){r.clear()}else{m.foldCode(h(n,0),o.rangeFinder)}}function g(m){var o=m.state.foldGutter;if(!o){return}var n=o.options;o.from=o.to=0;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){b(m)},n.foldOnChangeTimeSpan||600)}function l(m){var o=m.state.foldGutter;if(!o){return}var n=o.options;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){var p=m.getViewport();if(o.from==o.to||p.from-o.to>20||o.from-p.to>20){b(m)}else{m.operation(function(){if(p.from<o.from){a(m,p.from,o.from);o.from=p.from}if(p.to>o.to){a(m,o.to,p.to);o.to=p.to}})}},n.updateViewportTimeSpan||400)}function e(m,p){var o=m.state.foldGutter;if(!o){return}var n=p.line;if(n>=o.from&&n<o.to){a(m,n,n+1)}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){function b(c,f){var d=c.getLine(f);var e=d.search(/\S/);if(e==-1||/\bcomment\b/.test(c.getTokenTypeAt(a.Pos(f,e+1)))){return -1}return a.countColumn(d,null,c.getOption("tabSize"))}a.registerHelper("fold","indent",function(d,j){var f=b(d,j.line);if(f<0){return}var h=null;for(var g=j.line+1,e=d.lastLine();g<=e;++g){var c=b(d,g);if(c==-1){}else{if(c>f){h=g}else{break}}}if(h){return{from:a.Pos(j.line,d.getLine(j.line).length),to:a.Pos(h,d.getLine(h).length)}}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","markdown",function(j,e){var f=100;function c(n){var m=j.getTokenTypeAt(a.Pos(n,0));return m&&/\bheader\b/.test(m)}function k(p,m,o){var n=m&&m.match(/^#+/);if(n&&c(p)){return n[0].length}n=o&&o.match(/^[=\-]+\s*$/);if(n&&c(p+1)){return o[0]=="="?1:2}return f}var i=j.getLine(e.line),d=j.getLine(e.line+1);var b=k(e.line,i,d);if(b===f){return undefined}var l=j.lastLine();var g=e.line,h=j.getLine(g+2);while(g<l){if(k(g+1,d,h)<=b){break}++g;d=h;h=j.getLine(g+2)}return{from:a.Pos(e.line,i.length),to:a.Pos(g,j.getLine(g).length)}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function a(f,h,e){this.orientation=h;this.scroll=e;this.screen=this.total=this.size=1;this.pos=0;this.node=document.createElement("div");this.node.className=f+"-"+h;this.inner=this.node.appendChild(document.createElement("div"));var g=this;b.on(this.inner,"mousedown",function(n){if(n.which!=1){return}b.e_preventDefault(n);var l=g.orientation=="horizontal"?"pageX":"pageY";var o=n[l],m=g.pos;function k(){b.off(document,"mousemove",j);b.off(document,"mouseup",k)}function j(p){if(p.which!=1){return k()}g.moveTo(m+(p[l]-o)*(g.total/g.size))}b.on(document,"mousemove",j);b.on(document,"mouseup",k)});b.on(this.node,"click",function(l){b.e_preventDefault(l);var j=g.inner.getBoundingClientRect(),k;if(g.orientation=="horizontal"){k=l.clientX<j.left?-1:l.clientX>j.right?1:0}else{k=l.clientY<j.top?-1:l.clientY>j.bottom?1:0}g.moveTo(g.pos+k*g.screen)});function i(l){var k=b.wheelEventPixels(l)[g.orientation=="horizontal"?"x":"y"];var j=g.pos;g.moveTo(g.pos+k);if(g.pos!=j){b.e_preventDefault(l)}}b.on(this.node,"mousewheel",i);b.on(this.node,"DOMMouseScroll",i)}a.prototype.setPos=function(f,e){if(f<0){f=0}if(f>this.total-this.screen){f=this.total-this.screen}if(!e&&f==this.pos){return false}this.pos=f;this.inner.style[this.orientation=="horizontal"?"left":"top"]=(f*(this.size/this.total))+"px";return true};a.prototype.moveTo=function(e){if(this.setPos(e)){this.scroll(e,this.orientation)}};var d=10;a.prototype.update=function(g,h,i){var f=this.screen!=h||this.total!=g||this.size!=i;if(f){this.screen=h;this.total=g;this.size=i}var e=this.screen*(this.size/this.total);if(e<d){this.size-=d-e;e=d}this.inner.style[this.orientation=="horizontal"?"width":"height"]=e+"px";this.setPos(this.pos,f)};function c(g,f,e){this.addClass=g;this.horiz=new a(g,"horizontal",e);f(this.horiz.node);this.vert=new a(g,"vertical",e);f(this.vert.node);this.width=null}c.prototype.update=function(h){if(this.width==null){var g=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;if(g){this.width=parseInt(g.height)}}var f=this.width||0;var i=h.scrollWidth>h.clientWidth+1;var e=h.scrollHeight>h.clientHeight+1;this.vert.node.style.display=e?"block":"none";this.horiz.node.style.display=i?"block":"none";if(e){this.vert.update(h.scrollHeight,h.clientHeight,h.viewHeight-(i?f:0));this.vert.node.style.bottom=i?f+"px":"0"}if(i){this.horiz.update(h.scrollWidth,h.clientWidth,h.viewWidth-(e?f:0)-h.barLeft);this.horiz.node.style.right=e?f+"px":"0";this.horiz.node.style.left=h.barLeft+"px"}return{right:e?f:0,bottom:i?f:0}};c.prototype.setScrollTop=function(e){this.vert.setPos(e)};c.prototype.setScrollLeft=function(e){this.horiz.setPos(e)};c.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node);e.removeChild(this.vert.node)};b.scrollbarModel.simple=function(f,e){return new c("CodeMirror-simplescroll",f,e)};b.scrollbarModel.overlay=function(f,e){return new c("CodeMirror-overlayscroll",f,e)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(c){var h="CodeMirror-activeline";var g="CodeMirror-activeline-background";var f="CodeMirror-activeline-gutter";c.defineOption("styleActiveLine",false,function(i,l,j){var k=j==c.Init?false:j;if(l==k){return}if(k){i.off("beforeSelectionChange",b);d(i);delete i.state.activeLines}if(l){i.state.activeLines=[];e(i,i.listSelections());i.on("beforeSelectionChange",b)}});function d(j){for(var k=0;k<j.state.activeLines.length;k++){j.removeLineClass(j.state.activeLines[k],"wrap",h);j.removeLineClass(j.state.activeLines[k],"background",g);j.removeLineClass(j.state.activeLines[k],"gutter",f)}}function a(k,j){if(k.length!=j.length){return false}for(var l=0;l<k.length;l++){if(k[l]!=j[l]){return false}}return true}function e(j,l){var p=[];for(var n=0;n<l.length;n++){var m=l[n];var o=j.getOption("styleActiveLine");if(typeof o=="object"&&o.nonEmpty?m.anchor.line!=m.head.line:!m.empty()){continue}var k=j.getLineHandleVisualStart(m.head.line);if(p[p.length-1]!=k){p.push(k)}}if(a(j.state.activeLines,p)){return}j.operation(function(){d(j);for(var q=0;q<p.length;q++){j.addLineClass(p[q],"wrap",h);j.addLineClass(p[q],"background",g);j.addLineClass(p[q],"gutter",f)}j.state.activeLines=p})}function b(i,j){e(i,j.ranges)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../xml/xml"),require("../meta"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../xml/xml","../meta"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("markdown",function(G,o){var j=a.getMode(G,"text/html");var d=j.name=="null";function g(K){if(a.findModeByName){var L=a.findModeByName(K);if(L){K=L.mime||L.mimes[0]}}var M=a.getMode(G,K);return M.name=="null"?null:M}if(o.highlightFormatting===undefined){o.highlightFormatting=false}if(o.maxBlockquoteDepth===undefined){o.maxBlockquoteDepth=0}if(o.taskLists===undefined){o.taskLists=false}if(o.strikethrough===undefined){o.strikethrough=false}if(o.emoji===undefined){o.emoji=false}if(o.fencedCodeBlockHighlighting===undefined){o.fencedCodeBlockHighlighting=true}if(o.xml===undefined){o.xml=true}if(o.tokenTypeOverrides===undefined){o.tokenTypeOverrides={}}var q={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var I in q){if(q.hasOwnProperty(I)&&o.tokenTypeOverrides[I]){q[I]=o.tokenTypeOverrides[I]}}var J=/^([*\-_])(?:\s*\1){2,}\s*$/,B=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,D=/^\[(x| )\](?=\s)/i,p=o.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,F=/^ *(?:\={1,}|-{1,})\s*$/,h=/^[^#!\[\]*_\\<>` "'(~:]+/,E=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,z=/^\s*\[[^\]]+?\]:.*$/,l=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,u="    ";function f(M,L,K){L.f=L.inline=K;return K(M,L)}function w(M,L,K){L.f=L.block=K;return K(M,L)}function t(K){return !K||!/\S/.test(K.string)}function s(M){M.linkTitle=false;M.linkHref=false;M.linkText=false;M.em=false;M.strong=false;M.strikethrough=false;M.quote=0;M.indentedCode=false;if(M.f==A){var L=d;if(!L){var K=a.innerMode(j,M.htmlState);L=K.mode.name=="xml"&&K.state.tagStart===null&&(!K.state.context&&K.state.tokenize.isInText)}if(L){M.f=v;M.block=n;M.htmlState=null}}M.trailingSpace=0;M.trailingSpaceNewLine=false;M.prevLine=M.thisLine;M.thisLine={stream:null};return null}function n(W,L){var R=W.column()===L.indentation;var M=t(L.prevLine.stream);var K=L.indentedCode;var N=L.prevLine.hr;var V=L.list!==false;var S=(L.listStack[L.listStack.length-1]||0)+3;L.indentedCode=false;var P=L.indentation;if(L.indentationDiff===null){L.indentationDiff=L.indentation;if(V){L.em=false;L.strong=false;L.code=false;L.strikethrough=false;L.list=null;while(P<L.listStack[L.listStack.length-1]){L.listStack.pop();if(L.listStack.length){L.indentation=L.listStack[L.listStack.length-1]}else{L.list=false}}if(L.list!==false){L.indentationDiff=P-L.listStack[L.listStack.length-1]}}}var U=(!M&&!N&&!L.prevLine.header&&(!V||!K)&&!L.prevLine.fencedCodeEnd);var Q=(L.list===false||N||M)&&L.indentation<=S&&W.match(J);var O=null;if(L.indentationDiff>=4&&(K||L.prevLine.fencedCodeEnd||L.prevLine.header||M)){W.skipToEnd();L.indentedCode=true;return q.code}else{if(W.eatSpace()){return null}else{if(R&&L.indentation<=S&&(O=W.match(p))&&O[1].length<=6){L.quote=0;L.header=O[1].length;L.thisLine.header=true;if(o.highlightFormatting){L.formatting="header"}L.f=L.inline;return y(L)}else{if(L.indentation<=S&&W.eat(">")){L.quote=R?1:L.quote+1;if(o.highlightFormatting){L.formatting="quote"}W.eatSpace();return y(L)}else{if(!Q&&!L.setext&&R&&L.indentation<=S&&(O=W.match(B))){var T=O[1]?"ol":"ul";L.indentation=P+W.current().length;L.list=true;L.quote=0;L.listStack.push(L.indentation);if(o.taskLists&&W.match(D,false)){L.taskList=true}L.f=L.inline;if(o.highlightFormatting){L.formatting=["list","list-"+T]}return y(L)}else{if(R&&L.indentation<=S&&(O=W.match(E,true))){L.quote=0;L.fencedEndRE=new RegExp(O[1]+"+ *$");L.localMode=o.fencedCodeBlockHighlighting&&g(O[2]);if(L.localMode){L.localState=a.startState(L.localMode)}L.f=L.block=x;if(o.highlightFormatting){L.formatting="code-block"}L.code=-1;return y(L)}else{if(L.setext||((!U||!V)&&!L.quote&&L.list===false&&!L.code&&!Q&&!z.test(W.string)&&(O=W.lookAhead(1))&&(O=O.match(F)))){if(!L.setext){L.header=O[0].charAt(0)=="="?1:2;L.setext=L.header}else{L.header=L.setext;L.setext=0;W.skipToEnd();if(o.highlightFormatting){L.formatting="header"}}L.thisLine.header=true;L.f=L.inline;return y(L)}else{if(Q){W.skipToEnd();L.hr=true;L.thisLine.hr=true;return q.hr}else{if(W.peek()==="["){return f(W,L,m)}}}}}}}}}return f(W,L,L.inline)}function A(N,M){var L=j.token(N,M.htmlState);if(!d){var K=a.innerMode(j,M.htmlState);if((K.mode.name=="xml"&&K.state.tagStart===null&&(!K.state.context&&K.state.tokenize.isInText))||(M.md_inside&&N.current().indexOf(">")>-1)){M.f=v;M.block=n;M.htmlState=null}}return L}function x(P,O){var K=O.listStack[O.listStack.length-1]||0;var N=O.indentation<K;var M=K+3;if(O.fencedEndRE&&O.indentation<=M&&(N||P.match(O.fencedEndRE))){if(o.highlightFormatting){O.formatting="code-block"}var L;if(!N){L=y(O)}O.localMode=O.localState=null;O.block=n;O.f=v;O.fencedEndRE=null;O.code=0;O.thisLine.fencedCodeEnd=true;if(N){return w(P,O,O.block)}return L}else{if(O.localMode){return O.localMode.token(P,O.localState)}else{P.skipToEnd();return q.code}}}function y(N){var M=[];if(N.formatting){M.push(q.formatting);if(typeof N.formatting==="string"){N.formatting=[N.formatting]}for(var K=0;K<N.formatting.length;K++){M.push(q.formatting+"-"+N.formatting[K]);if(N.formatting[K]==="header"){M.push(q.formatting+"-"+N.formatting[K]+"-"+N.header)}if(N.formatting[K]==="quote"){if(!o.maxBlockquoteDepth||o.maxBlockquoteDepth>=N.quote){M.push(q.formatting+"-"+N.formatting[K]+"-"+N.quote)}else{M.push("error")}}}}if(N.taskOpen){M.push("meta");return M.length?M.join(" "):null}if(N.taskClosed){M.push("property");return M.length?M.join(" "):null}if(N.linkHref){M.push(q.linkHref,"url")}else{if(N.strong){M.push(q.strong)}if(N.em){M.push(q.em)}if(N.strikethrough){M.push(q.strikethrough)}if(N.emoji){M.push(q.emoji)}if(N.linkText){M.push(q.linkText)}if(N.code){M.push(q.code)}if(N.image){M.push(q.image)}if(N.imageAltText){M.push(q.imageAltText,"link")}if(N.imageMarker){M.push(q.imageMarker)}}if(N.header){M.push(q.header,q.header+"-"+N.header)}if(N.quote){M.push(q.quote);if(!o.maxBlockquoteDepth||o.maxBlockquoteDepth>=N.quote){M.push(q.quote+"-"+N.quote)}else{M.push(q.quote+"-"+o.maxBlockquoteDepth)}}if(N.list!==false){var L=(N.listStack.length-1)%3;if(!L){M.push(q.list1)}else{if(L===1){M.push(q.list2)}else{M.push(q.list3)}}}if(N.trailingSpaceNewLine){M.push("trailing-space-new-line")}else{if(N.trailingSpace){M.push("trailing-space-"+(N.trailingSpace%2?"a":"b"))}}return M.length?M.join(" "):null}function c(L,K){if(L.match(h,true)){return y(K)}return undefined}function v(Q,P){var ae=P.text(Q,P);if(typeof ae!=="undefined"){return ae}if(P.list){P.list=null;return y(P)}if(P.taskList){var Z=Q.match(D,true)[1]===" ";if(Z){P.taskOpen=true}else{P.taskClosed=true}if(o.highlightFormatting){P.formatting="task"}P.taskList=false;return y(P)}P.taskOpen=false;P.taskClosed=false;if(P.header&&Q.match(/^#+$/,true)){if(o.highlightFormatting){P.formatting="header"}return y(P)}var V=Q.next();if(P.linkTitle){P.linkTitle=false;var ac=V;if(V==="("){ac=")"}ac=(ac+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var M="^\\s*(?:[^"+ac+"\\\\]+|\\\\\\\\|\\\\.)"+ac;if(Q.match(new RegExp(M),true)){return q.linkHref}}if(V==="`"){var ab=P.formatting;if(o.highlightFormatting){P.formatting="code"}Q.eatWhile("`");var R=Q.current().length;if(P.code==0&&(!P.quote||R==1)){P.code=R;return y(P)}else{if(R==P.code){var X=y(P);P.code=0;return X}else{P.formatting=ab;return y(P)}}}else{if(P.code){return y(P)}}if(V==="\\"){Q.next();if(o.highlightFormatting){var N=y(P);var U=q.formatting+"-escape";return N?N+" "+U:U}}if(V==="!"&&Q.match(/\[[^\]]*\] ?(?:\(|\[)/,false)){P.imageMarker=true;P.image=true;if(o.highlightFormatting){P.formatting="image"}return y(P)}if(V==="["&&P.imageMarker&&Q.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,false)){P.imageMarker=false;P.imageAltText=true;if(o.highlightFormatting){P.formatting="image"}return y(P)}if(V==="]"&&P.imageAltText){if(o.highlightFormatting){P.formatting="image"}var N=y(P);P.imageAltText=false;P.image=false;P.inline=P.f=i;return N}if(V==="["&&!P.image){if(P.linkText&&Q.match(/^.*?\]/)){return y(P)}P.linkText=true;if(o.highlightFormatting){P.formatting="link"}return y(P)}if(V==="]"&&P.linkText){if(o.highlightFormatting){P.formatting="link"}var N=y(P);P.linkText=false;P.inline=P.f=Q.match(/\(.*?\)| ?\[.*?\]/,false)?i:v;return N}if(V==="<"&&Q.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,false)){P.f=P.inline=C;if(o.highlightFormatting){P.formatting="link"}var N=y(P);if(N){N+=" "}else{N=""}return N+q.linkInline}if(V==="<"&&Q.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,false)){P.f=P.inline=C;if(o.highlightFormatting){P.formatting="link"}var N=y(P);if(N){N+=" "}else{N=""}return N+q.linkEmail}if(o.xml&&V==="<"&&Q.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,false)){var O=Q.string.indexOf(">",Q.pos);if(O!=-1){var aa=Q.string.substring(Q.start,O);if(/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(aa)){P.md_inside=true}}Q.backUp(1);P.htmlState=a.startState(j);return w(Q,P,A)}if(o.xml&&V==="<"&&Q.match(/^\/\w*?>/)){P.md_inside=false;return"tag"}else{if(V==="*"||V==="_"){var ad=1,Y=Q.pos==1?" ":Q.string.charAt(Q.pos-2);while(ad<3&&Q.eat(V)){ad++}var L=Q.peek()||" ";var W=!/\s/.test(L)&&(!l.test(L)||/\s/.test(Y)||l.test(Y));var af=!/\s/.test(Y)&&(!l.test(Y)||/\s/.test(L)||l.test(L));var S=null,K=null;if(ad%2){if(!P.em&&W&&(V==="*"||!af||l.test(Y))){S=true}else{if(P.em==V&&af&&(V==="*"||!W||l.test(L))){S=false}}}if(ad>1){if(!P.strong&&W&&(V==="*"||!af||l.test(Y))){K=true}else{if(P.strong==V&&af&&(V==="*"||!W||l.test(L))){K=false}}}if(K!=null||S!=null){if(o.highlightFormatting){P.formatting=S==null?"strong":K==null?"em":"strong em"}if(S===true){P.em=V}if(K===true){P.strong=V}var X=y(P);if(S===false){P.em=false}if(K===false){P.strong=false}return X}}else{if(V===" "){if(Q.eat("*")||Q.eat("_")){if(Q.peek()===" "){return y(P)}else{Q.backUp(1)}}}}}if(o.strikethrough){if(V==="~"&&Q.eatWhile(V)){if(P.strikethrough){if(o.highlightFormatting){P.formatting="strikethrough"}var X=y(P);P.strikethrough=false;return X}else{if(Q.match(/^[^\s]/,false)){P.strikethrough=true;if(o.highlightFormatting){P.formatting="strikethrough"}return y(P)}}}else{if(V===" "){if(Q.match(/^~~/,true)){if(Q.peek()===" "){return y(P)}else{Q.backUp(2)}}}}}if(o.emoji&&V===":"&&Q.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){P.emoji=true;if(o.highlightFormatting){P.formatting="emoji"}var T=y(P);P.emoji=false;return T}if(V===" "){if(Q.match(/^ +$/,false)){P.trailingSpace++}else{if(P.trailingSpace){P.trailingSpaceNewLine=true}}}return y(P)}function C(N,M){var L=N.next();if(L===">"){M.f=M.inline=v;if(o.highlightFormatting){M.formatting="link"}var K=y(M);if(K){K+=" "}else{K=""}return K+q.linkInline}N.match(/^[^>]+/,true);return q.linkInline}function i(M,L){if(M.eatSpace()){return null}var K=M.next();if(K==="("||K==="["){L.f=L.inline=k(K==="("?")":"]");if(o.highlightFormatting){L.formatting="link-string"}L.linkHref=true;return y(L)}return"error"}var e={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function k(K){return function(O,N){var M=O.next();if(M===K){N.f=N.inline=v;if(o.highlightFormatting){N.formatting="link-string"}var L=y(N);N.linkHref=false;return L}O.match(e[K]);N.linkHref=true;return y(N)}}function m(L,K){if(L.match(/^([^\]\\]|\\.)*\]:/,false)){K.f=H;L.next();if(o.highlightFormatting){K.formatting="link"}K.linkText=true;return y(K)}return f(L,K,v)}function H(M,L){if(M.match(/^\]:/,true)){L.f=L.inline=b;if(o.highlightFormatting){L.formatting="link"}var K=y(L);L.linkText=false;return K}M.match(/^([^\]\\]|\\.)+/,true);return q.linkText}function b(L,K){if(L.eatSpace()){return null}L.match(/^[^\s]+/,true);if(L.peek()===undefined){K.linkTitle=true}else{L.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,true)}K.f=K.inline=v;return q.linkHref+" url"}var r={startState:function(){return{f:n,prevLine:{stream:null},thisLine:{stream:null},block:n,htmlState:null,indentation:0,inline:v,text:c,formatting:false,linkText:false,linkHref:false,linkTitle:false,code:0,em:false,strong:false,header:0,setext:0,hr:false,taskList:false,list:false,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:false,strikethrough:false,emoji:false,fencedEndRE:null}},copyState:function(K){return{f:K.f,prevLine:K.prevLine,thisLine:K.thisLine,block:K.block,htmlState:K.htmlState&&a.copyState(j,K.htmlState),indentation:K.indentation,localMode:K.localMode,localState:K.localMode?a.copyState(K.localMode,K.localState):null,inline:K.inline,text:K.text,formatting:false,linkText:K.linkText,linkTitle:K.linkTitle,linkHref:K.linkHref,code:K.code,em:K.em,strong:K.strong,strikethrough:K.strikethrough,emoji:K.emoji,header:K.header,setext:K.setext,hr:K.hr,taskList:K.taskList,list:K.list,listStack:K.listStack.slice(0),quote:K.quote,indentedCode:K.indentedCode,trailingSpace:K.trailingSpace,trailingSpaceNewLine:K.trailingSpaceNewLine,md_inside:K.md_inside,fencedEndRE:K.fencedEndRE}},token:function(M,L){L.formatting=false;if(M!=L.thisLine.stream){L.header=0;L.hr=false;if(M.match(/^\s*$/,true)){s(L);return null}L.prevLine=L.thisLine;L.thisLine={stream:M};L.taskList=false;L.trailingSpace=0;L.trailingSpaceNewLine=false;if(!L.localState){L.f=L.block;if(L.f!=A){var K=M.match(/^\s*/,true)[0].replace(/\t/g,u).length;L.indentation=K;L.indentationDiff=null;if(K>0){return null}}}}return L.f(M,L)},innerMode:function(K){if(K.block==A){return{state:K.htmlState,mode:j}}if(K.localState){return{state:K.localState,mode:K.localMode}}return{state:K,mode:r}},indent:function(M,L,K){if(M.block==A&&j.indent){return j.indent(M.htmlState,L,K)}if(M.localState&&M.localMode.indent){return M.localMode.indent(M.localState,L,K)}return a.Pass},blankLine:s,getType:y,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return r},"xml");a.defineMIME("text/markdown","markdown");a.defineMIME("text/x-markdown","markdown")});